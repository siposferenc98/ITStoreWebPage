@inject ILocalStorageService localStorage

<div class="card col-2" style="width:200px">
    <img class = "card-img-top"/>
    <div class="card-body">
        <h5>@Text</h5>
        <p>Random leiras</p>
        <button class="btn btn-primary" @onclick="AddItem">Add</button>
    </div>
</div>

@code {
    [Parameter]
    public string Text { get; set; }
    [CascadingParameter]
    public Task<AuthenticationState> authenticationState { get; set; }


    public async Task AddItem()
    {
        var userEmail = await GetUserFromAuthState.GetEmailFromAuthUser(authenticationState);
        if(userEmail is not "")
        {
            if(await localStorage.ContainKeyAsync(userEmail))
            {
                var cart = await localStorage.GetItemAsync<List<string>>(userEmail);
                cart.Add(Text);
                await localStorage.SetItemAsync(userEmail,cart);
            }
            else
            {
                await localStorage.SetItemAsync(userEmail,new List<string>() {Text});
            }
        }
        
    }

}
